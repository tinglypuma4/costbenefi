<Window x:Class="costbenefi.CompletarProductoTerminadoWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Completar Producto Terminado" Height="700" Width="600"
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize"
        Background="#F8F9FA">

    <Window.Resources>
        <!-- Estilos para la ventana -->
        <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#2E3A4B"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>
        
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#4A5568"/>
            <Setter Property="Margin" Value="0,10,0,5"/>
        </Style>
        
        <Style x:Key="TextBoxStyle" TargetType="TextBox">
            <Setter Property="Padding" Value="8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="BorderBrush" Value="#CBD5E0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="White"/>
        </Style>
        
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <Style x:Key="PrimaryButtonStyle" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="Background" Value="#3B82F6"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        
        <Style x:Key="SecondaryButtonStyle" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="Background" Value="#6B7280"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        
        <Style x:Key="SuccessButtonStyle" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="Background" Value="#10B981"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="🏭 Completar Producto Terminado" Style="{StaticResource HeaderTextStyle}"/>
            <TextBlock x:Name="TxtInfoLote" Text="Lote: FAB250101 | Cantidad: 10.5 L" 
                       FontSize="12" Foreground="#6B7280"/>
            <TextBlock x:Name="TxtCostoUnitario" Text="Costo unitario: $45.50" 
                       FontSize="12" Foreground="#6B7280"/>
        </StackPanel>

        <!-- Formulario -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                
                <!-- Información Básica -->
                <Border Background="White" BorderBrush="#E5E7EB" BorderThickness="1" 
                        CornerRadius="8" Padding="20" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="📋 Información Básica" Style="{StaticResource HeaderTextStyle}"/>
                        
                        <TextBlock Text="Nombre del Producto *" Style="{StaticResource LabelStyle}"/>
                        <TextBox x:Name="TxtNombreProducto" Style="{StaticResource TextBoxStyle}"
                                 Text="Cerveza Artesanal IPA - Lote FAB250101"/>
                        
                        <TextBlock Text="Categoría *" Style="{StaticResource LabelStyle}"/>
                        <TextBox x:Name="TxtCategoria" Style="{StaticResource TextBoxStyle}"
                                 Text="Fabricados - Bebidas"/>
                        
                        <TextBlock Text="Código de Barras" Style="{StaticResource LabelStyle}"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="TxtCodigoBarras" Grid.Column="0" 
                                     Style="{StaticResource TextBoxStyle}" FontFamily="Consolas"
                                     Text="FAB250125010123"/>
                            <Button x:Name="BtnGenerarCodigo" Grid.Column="1" Content="🔄 Generar"
                                    Style="{StaticResource SecondaryButtonStyle}" Margin="5,0,0,0"
                                    Click="BtnGenerarCodigo_Click"/>
                        </Grid>
                        <TextBlock Text="Se genera automáticamente. Puede modificarlo si es necesario." 
                                   FontSize="10" Foreground="#9CA3AF" Margin="0,2,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Configuración para Venta -->
                <Border Background="White" BorderBrush="#E5E7EB" BorderThickness="1" 
                        CornerRadius="8" Padding="20" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="🛒 Configuración para Venta" Style="{StaticResource HeaderTextStyle}"/>
                        
                        <CheckBox x:Name="ChkActivoParaVenta" Content="Activo para venta en POS" 
                                  FontWeight="SemiBold" IsChecked="True" Margin="0,0,0,15"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="Margen Objetivo (%)" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="TxtMargenObjetivo" Style="{StaticResource TextBoxStyle}"
                                         Text="30" TextAlignment="Right"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                <TextBlock Text="Stock Mínimo Venta" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="TxtStockMinimo" Style="{StaticResource TextBoxStyle}"
                                         Text="1" TextAlignment="Right"/>
                            </StackPanel>
                        </Grid>
                        
                        <Grid Margin="0,10,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Precio de Venta" Style="{StaticResource LabelStyle}"/>
                                <TextBox x:Name="TxtPrecioVenta" Style="{StaticResource TextBoxStyle}"
                                         Text="59.15" TextAlignment="Right" FontFamily="Consolas"/>
                                <TextBlock x:Name="TxtInfoGanancia" Text="Ganancia: $13.65 por unidad" 
                                           FontSize="10" Foreground="#10B981" Margin="0,2,0,0"/>
                            </StackPanel>
                            
                            <Button x:Name="BtnCalcularPrecio" Grid.Column="1" Content="💰 Calcular"
                                    Style="{StaticResource SecondaryButtonStyle}" Margin="10,20,0,0"
                                    VerticalAlignment="Top" Click="BtnCalcularPrecio_Click"/>
                        </Grid>
                        
                        <TextBlock Text="Fecha de Vencimiento (Opcional)" Style="{StaticResource LabelStyle}"/>
                        <DatePicker x:Name="DpFechaVencimiento" Margin="0,0,0,5"/>
                        <TextBlock Text="Deje vacío si el producto no tiene fecha de vencimiento" 
                                   FontSize="10" Foreground="#9CA3AF"/>
                    </StackPanel>
                </Border>

                <!-- Información Adicional -->
                <Border Background="#F3F4F6" BorderBrush="#E5E7EB" BorderThickness="1" 
                        CornerRadius="8" Padding="15" Margin="0,0,0,10">
                    <StackPanel>
                        <TextBlock Text="ℹ️ Información" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,8"/>
                        <TextBlock TextWrapping="Wrap" FontSize="11" Foreground="#6B7280">
                            • El producto se agregará automáticamente a la tabla de materias primas<LineBreak/>
                            • Estará disponible inmediatamente en el POS y otros módulos<LineBreak/>
                            • Se registrarán todos los movimientos de stock correspondientes<LineBreak/>
                            • Los campos marcados con * son obligatorios
                        </TextBlock>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Botones -->
        <Grid Grid.Row="2" Margin="0,20,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <Button x:Name="BtnAyuda" Grid.Column="0" Content="❓ Ayuda"
                    Style="{StaticResource SecondaryButtonStyle}" 
                    Click="BtnAyuda_Click"/>
            
            <Button x:Name="BtnCancelar" Grid.Column="2" Content="❌ Cancelar"
                    Style="{StaticResource SecondaryButtonStyle}" Margin="0,0,10,0"
                    Click="BtnCancelar_Click"/>
            
            <Button x:Name="BtnAceptar" Grid.Column="3" Content="✅ Crear Producto"
                    Style="{StaticResource SuccessButtonStyle}"
                    Click="BtnAceptar_Click"/>
        </Grid>
    </Grid>
</Window>