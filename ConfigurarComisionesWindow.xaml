<Window x:Class="costbenefi.Views.ConfigurarComisionesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="⚙️ Configurar Comisiones de Tarjeta" 
        Height="550" Width="700"
        WindowStartupLocation="CenterOwner"
        Background="#F8F9FA"
        ResizeMode="NoResize">

    <Window.Resources>
        <Style x:Key="ModernCard" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#E2E8F0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <Style x:Key="HeaderText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#1E293B"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <Style x:Key="ModernTextBox" TargetType="TextBox">
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderBrush" Value="#CBD5E1"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- HEADER -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="⚙️ CONFIGURACIÓN DE COMISIONES" 
                      FontSize="24" FontWeight="Bold" 
                      Foreground="#1E293B"/>
            <TextBlock Text="Configure los porcentajes que cobra su terminal de pago" 
                      FontSize="13" Foreground="#64748B" Margin="0,5,0,0"/>
        </StackPanel>

        <!-- CONTENIDO -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>

                <!-- Comisión Base -->
                <Border Style="{StaticResource ModernCard}">
                    <StackPanel>
                        <TextBlock Text="💳 Comisión Base de la Terminal" Style="{StaticResource HeaderText}"/>

                        <TextBlock Text="Porcentaje de comisión (%):" FontSize="13" Foreground="#475569" Margin="0,0,0,5"/>
                        <TextBox x:Name="TxtPorcentajeComision" Style="{StaticResource ModernTextBox}"
                                Text="3.50" TextChanged="TxtPorcentajeComision_TextChanged"/>

                        <TextBlock Text="Este es el porcentaje que cobra el banco o terminal por cada transacción con tarjeta."
                                  FontSize="11" Foreground="#64748B" Margin="0,8,0,0" TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>

                <!-- IVA sobre Comisión -->
                <Border Style="{StaticResource ModernCard}">
                    <StackPanel>
                        <CheckBox x:Name="ChkCobraIVA" Content="🏦 La terminal cobra IVA adicional sobre la comisión" 
                                 FontSize="14" FontWeight="SemiBold" IsChecked="True"
                                 Checked="ChkCobraIVA_Checked" Unchecked="ChkCobraIVA_Unchecked"/>

                        <StackPanel x:Name="PanelIVA" Margin="0,15,0,0">
                            <TextBlock Text="Porcentaje de IVA (%):" FontSize="13" Foreground="#475569" Margin="0,0,0,5"/>
                            <TextBox x:Name="TxtPorcentajeIVA" Style="{StaticResource ModernTextBox}"
                                    Text="16.00" TextChanged="TxtPorcentajeIVA_TextChanged"/>

                            <TextBlock Text="El IVA se aplica sobre la comisión base, no sobre el monto de la venta."
                                      FontSize="11" Foreground="#64748B" Margin="0,8,0,0" TextWrapping="Wrap"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Vista Previa -->
                <Border Style="{StaticResource ModernCard}" Background="#F0FDF4">
                    <StackPanel>
                        <TextBlock Text="📊 Vista Previa del Cálculo" Style="{StaticResource HeaderText}"/>

                        <TextBlock x:Name="TxtVistaPrevia" 
                                  FontFamily="Consolas" FontSize="12" 
                                  Foreground="#065F46" TextWrapping="Wrap"
                                  Text="Ingrese los valores para ver el ejemplo"/>

                        <Border Background="#DCFCE7" Padding="10" CornerRadius="4" Margin="0,10,0,0">
                            <TextBlock x:Name="TxtPorcentajeEfectivo" 
                                      FontSize="13" FontWeight="Bold" 
                                      Foreground="#065F46" TextWrapping="Wrap"/>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- Info adicional -->
                <TextBlock x:Name="TxtUltimaModificacion" 
                          Text="Sin modificaciones previas" 
                          FontSize="11" Foreground="#94A3B8" 
                          HorizontalAlignment="Center" Margin="0,10,0,0"/>

            </StackPanel>
        </ScrollViewer>

        <!-- BOTONES -->
        <Grid Grid.Row="2" Margin="0,20,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="1" x:Name="BtnCancelar" Content="❌ Cancelar" 
                    Width="120" Height="40" Margin="0,0,10,0"
                    Background="#6B7280" Foreground="White" BorderThickness="0"
                    FontWeight="SemiBold" Click="BtnCancelar_Click"/>

            <Button Grid.Column="2" x:Name="BtnGuardar" Content="💾 Guardar Configuración" 
                    Width="180" Height="40"
                    Background="#059669" Foreground="White" BorderThickness="0"
                    FontWeight="Bold" Click="BtnGuardar_Click"/>
        </Grid>

    </Grid>
</Window>