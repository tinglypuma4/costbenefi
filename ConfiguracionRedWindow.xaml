<Window x:Class="costbenefi.Views.ConfiguracionRedWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="⚙️ Configuración de Red - Sincronización POS"
        Height="600" Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#F8F9FA">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2563EB" Padding="20">
            <StackPanel>
                <TextBlock Text="🌐 Configuración de Red y Sincronización" 
                          FontSize="20" FontWeight="Bold" Foreground="White"
                          HorizontalAlignment="Center"/>
                <TextBlock Text="Configure esta máquina como Servidor o Terminal"
                          FontSize="12" Foreground="#E5E7EB"
                          HorizontalAlignment="Center" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Content -->
        <ScrollViewer Grid.Row="1" Padding="30" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                
                <!-- Tipo de Instalación -->
                <GroupBox Header="📋 Tipo de Instalación" Margin="0,0,0,20" Padding="15">
                    <StackPanel>
                        <RadioButton x:Name="RbServidor" Content="🖥️ SERVIDOR (Máquina Principal)" 
                                   FontSize="14" FontWeight="Bold" Margin="0,10,0,5"
                                   Checked="RbServidor_Checked"/>
                        <TextBlock Text="• Base de datos maestra con todos los productos"
                                 FontSize="11" Foreground="Gray" Margin="25,0,0,5"/>
                        <TextBlock Text="• Recibe ventas de terminales automáticamente"
                                 FontSize="11" Foreground="Gray" Margin="25,0,0,5"/>
                        <TextBlock Text="• Ideal para oficina/almacén principal"
                                 FontSize="11" Foreground="Gray" Margin="25,0,0,15"/>

                        <RadioButton x:Name="RbTerminal" Content="💻 TERMINAL (Punto de Venta)" 
                                   FontSize="14" FontWeight="Bold" Margin="0,0,0,5"
                                   Checked="RbTerminal_Checked"/>
                        <TextBlock Text="• Se conecta al servidor para obtener datos"
                                 FontSize="11" Foreground="Gray" Margin="25,0,0,5"/>
                        <TextBlock Text="• Envía ventas al servidor automáticamente"
                                 FontSize="11" Foreground="Gray" Margin="25,0,0,5"/>
                        <TextBlock Text="• Ideal para cajas registradoras"
                                 FontSize="11" Foreground="Gray" Margin="25,0,0,15"/>

                        <RadioButton x:Name="RbStandalone" Content="🔒 STANDALONE (Sin Sincronización)" 
                                   FontSize="14" FontWeight="Bold" Margin="0,0,0,5"
                                   Checked="RbStandalone_Checked"/>
                        <TextBlock Text="• Funciona de manera independiente"
                                 FontSize="11" Foreground="Gray" Margin="25,0,0,5"/>
                        <TextBlock Text="• Sin conexión de red requerida"
                                 FontSize="11" Foreground="Gray" Margin="25,0,0,5"/>
                    </StackPanel>
                </GroupBox>

                <!-- Configuración de Servidor -->
                <GroupBox x:Name="GbConfigServidor" Header="🖥️ Configuración de Servidor" 
                         Margin="0,0,0,20" Padding="15" IsEnabled="False">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="IP del Servidor:" 
                                 VerticalAlignment="Center" FontWeight="SemiBold"/>
                        <TextBox x:Name="TxtIPServidor" Grid.Row="0" Grid.Column="1" 
                               Text="0.0.0.0" Padding="8" Margin="5,5,5,5"/>
                        <TextBlock Grid.Row="0" Grid.Column="2" Text="(Todas las IPs)" 
                                 VerticalAlignment="Center" FontSize="10" Foreground="Gray"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Puerto:" 
                                 VerticalAlignment="Center" FontWeight="SemiBold"/>
                        <TextBox x:Name="TxtPuertoServidor" Grid.Row="1" Grid.Column="1" 
                               Text="5000" Padding="8" Margin="5,5,5,5"/>
                        <TextBlock Grid.Row="1" Grid.Column="2" Text="(Predeterminado)" 
                                 VerticalAlignment="Center" FontSize="10" Foreground="Gray"/>

                        <StackPanel Grid.Row="2" Grid.ColumnSpan="3" Orientation="Horizontal" Margin="0,10,0,0">
                            <TextBlock Text="🌐 URL del servidor: " FontWeight="SemiBold"/>
                            <TextBlock x:Name="TxtUrlServidor" Text="http://0.0.0.0:5000" 
                                     FontFamily="Consolas" Foreground="#2563EB"/>
                        </StackPanel>
                    </Grid>
                </GroupBox>

                <!-- Configuración de Terminal -->
                <GroupBox x:Name="GbConfigTerminal" Header="💻 Configuración de Terminal" 
                         Margin="0,0,0,20" Padding="15" IsEnabled="False">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="120"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="IP del Servidor:" 
                                 VerticalAlignment="Center" FontWeight="SemiBold"/>
                        <TextBox x:Name="TxtIPServidorTerminal" Grid.Row="0" Grid.Column="1" 
                               Text="192.168.1.100" Padding="8" Margin="5,5,5,5"/>
                        <Button x:Name="BtnDetectarIP" Grid.Row="0" Grid.Column="2" Content="🔍 Detectar"
                              Margin="5" Click="BtnDetectarIP_Click"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Puerto:" 
                                 VerticalAlignment="Center" FontWeight="SemiBold"/>
                        <TextBox x:Name="TxtPuertoTerminal" Grid.Row="1" Grid.Column="1" 
                               Text="5000" Padding="8" Margin="5,5,5,5"/>
                        <Button x:Name="BtnProbarConexion" Grid.Row="1" Grid.Column="2" Content="🧪 Probar"
                              Margin="5" Click="BtnProbarConexion_Click"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Nombre Terminal:" 
                                 VerticalAlignment="Center" FontWeight="SemiBold"/>
                        <TextBox x:Name="TxtNombreTerminal" Grid.Row="2" Grid.Column="1" 
                               Padding="8" Margin="5,5,5,5"/>
                        <TextBlock Grid.Row="2" Grid.Column="2" Text="(Ej: Caja1)" 
                                 VerticalAlignment="Center" FontSize="10" Foreground="Gray"/>

                        <StackPanel Grid.Row="3" Grid.ColumnSpan="3" Orientation="Horizontal" Margin="0,10,0,0">
                            <TextBlock Text="🔗 Conectará a: " FontWeight="SemiBold"/>
                            <TextBlock x:Name="TxtUrlConexion" Text="http://192.168.1.100:5000" 
                                     FontFamily="Consolas" Foreground="#2563EB"/>
                        </StackPanel>
                    </Grid>
                </GroupBox>

                <!-- Configuración de Sincronización -->
                <GroupBox x:Name="GbConfigSync" Header="🔄 Configuración de Sincronización" 
                         Margin="0,0,0,20" Padding="15" IsEnabled="False">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>

                        <CheckBox x:Name="ChkSincronizacionAutomatica" Grid.Row="0" Grid.ColumnSpan="3"
                                Content="🔄 Activar sincronización automática" 
                                FontWeight="SemiBold" IsChecked="True" Margin="0,0,0,10"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Intervalo de sincronización:" 
                                 VerticalAlignment="Center"/>
                        <Slider x:Name="SliderIntervalo" Grid.Row="1" Grid.Column="1" 
                              Minimum="10" Maximum="300" Value="30" 
                              TickFrequency="10" IsSnapToTickEnabled="True"
                              Margin="5,0,5,0" ValueChanged="SliderIntervalo_ValueChanged"/>
                        <TextBlock x:Name="TxtIntervaloValor" Grid.Row="1" Grid.Column="2" 
                                 Text="30 seg" VerticalAlignment="Center" 
                                 HorizontalAlignment="Center" FontWeight="Bold"/>

                        <TextBlock Grid.Row="2" Grid.ColumnSpan="3" 
                                 Text="💡 Recomendado: 30 segundos para equilibrar rendimiento y sincronización"
                                 FontSize="10" Foreground="Gray" Margin="0,5,0,0"/>
                    </Grid>
                </GroupBox>

                <!-- Estado Actual -->
                <GroupBox Header="📊 Estado Actual" Margin="0,0,0,20" Padding="15">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Configuración:" FontWeight="SemiBold"/>
                        <TextBlock x:Name="TxtConfigActual" Grid.Row="0" Grid.Column="1" Text="Sin configurar"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="IP de esta máquina:" FontWeight="SemiBold"/>
                        <TextBlock x:Name="TxtIPLocal" Grid.Row="1" Grid.Column="1" Text="Detectando..."
                                 FontFamily="Consolas"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Estado:" FontWeight="SemiBold"/>
                        <TextBlock x:Name="TxtEstado" Grid.Row="2" Grid.Column="1" Text="⚪ Standby"/>

                        <TextBlock Grid.Row="3" Grid.Column="0" Text="Última conexión:" FontWeight="SemiBold"/>
                        <TextBlock x:Name="TxtUltimaConexion" Grid.Row="3" Grid.Column="1" Text="Nunca"/>
                    </Grid>
                </GroupBox>

            </StackPanel>
        </ScrollViewer>

        <!-- Botones -->
        <Border Grid.Row="2" Background="#F1F3F4" Padding="20">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="BtnCancelar" Content="❌ Cancelar" Width="120" Height="40"
                      Background="#6C757D" Foreground="White" BorderThickness="0"
                      Margin="0,0,10,0" Click="BtnCancelar_Click"/>
                <Button x:Name="BtnProbarConfiguracion" Content="🧪 Probar Config" Width="140" Height="40"
                      Background="#FFC107" Foreground="White" BorderThickness="0"
                      Margin="0,0,10,0" Click="BtnProbarConfiguracion_Click"/>
                <Button x:Name="BtnGuardar" Content="💾 Guardar y Aplicar" Width="160" Height="40"
                      Background="#28A745" Foreground="White" BorderThickness="0"
                      Click="BtnGuardar_Click"/>
            </StackPanel>
        </Border>

    </Grid>
</Window>