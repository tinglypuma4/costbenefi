<Window x:Class="costbenefi.Views.AplicarDescuentoWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="💰 Aplicar Descuento" Height="550" Width="500"
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize"
        Background="#F8F9FA">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Encabezado -->
        <Border Grid.Row="0" Background="#059669" CornerRadius="8" Padding="15,12" Margin="0,0,0,20">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="💰" FontSize="20" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <TextBlock Text="APLICAR DESCUENTO" FontSize="16" FontWeight="Bold" 
                          Foreground="White" VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Información del total actual -->
        <Border Grid.Row="1" Background="#EFF6FF" BorderBrush="#3B82F6" BorderThickness="1" 
                CornerRadius="6" Padding="12" Margin="0,0,0,20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="💵 Total actual de la venta:" FontWeight="Bold" 
                          FontSize="12" Foreground="#1E40AF" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="1" x:Name="TxtTotalActual" Text="$0.00" FontWeight="Bold" 
                          FontSize="16" Foreground="#1E40AF" VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <!-- Tipo de descuento -->
        <TextBlock Grid.Row="2" Text="🎯 Tipo de descuento:" FontWeight="Bold" 
                  Margin="0,0,0,10" FontSize="12"/>

        <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,0,0,20">
            <RadioButton x:Name="RbPorcentaje" Content="📊 Porcentaje (%)" IsChecked="True" 
                        FontSize="12" Margin="0,0,20,0" Checked="TipoDescuento_Changed"/>
            <RadioButton x:Name="RbMontoFijo" Content="💵 Monto fijo ($)" 
                        FontSize="12" Checked="TipoDescuento_Changed"/>
        </StackPanel>

        <!-- Valor del descuento -->
        <TextBlock Grid.Row="4" x:Name="LblValorDescuento" Text="📊 Porcentaje de descuento:" 
                  FontWeight="Bold" Margin="0,0,0,5" FontSize="12"/>

        <Grid Grid.Row="5" Margin="0,0,0,15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBox Grid.Column="0" x:Name="TxtValorDescuento" Height="35" Padding="10,8,10,8" 
                    FontSize="13" BorderBrush="#D1D5DB" BorderThickness="1" 
                    TextChanged="TxtValorDescuento_TextChanged"/>
            <TextBlock Grid.Column="1" x:Name="TxtUnidadDescuento" Text="%" FontSize="16" 
                      FontWeight="Bold" Foreground="#6B7280" VerticalAlignment="Center" 
                      Margin="10,0,0,0"/>
        </Grid>

        <!-- Previsualización del descuento -->
        <Border Grid.Row="6" Background="#F0FDF4" BorderBrush="#22C55E" BorderThickness="1" 
                CornerRadius="6" Padding="12" Margin="0,0,0,15">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" Text="🎁 Descuento aplicado:" 
                          FontSize="12" Foreground="#166534" VerticalAlignment="Center"/>
                <TextBlock Grid.Row="0" Grid.Column="1" x:Name="TxtDescuentoCalculado" Text="$0.00" 
                          FontWeight="Bold" FontSize="14" Foreground="#166534" VerticalAlignment="Center"/>

                <Separator Grid.Row="1" Grid.ColumnSpan="2" Margin="0,8"/>

                <TextBlock Grid.Row="2" Grid.Column="0" Text="💰 NUEVO TOTAL:" FontWeight="Bold" 
                          FontSize="14" Foreground="#166534" VerticalAlignment="Center"/>
                <TextBlock Grid.Row="2" Grid.Column="1" x:Name="TxtNuevoTotal" Text="$0.00" 
                          FontWeight="Bold" FontSize="16" Foreground="#166534" VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <!-- Motivo del descuento -->
        <TextBlock Grid.Row="7" Text="📝 Motivo del descuento (obligatorio):" FontWeight="Bold" 
                  Margin="0,0,0,5" FontSize="12"/>

        <TextBox Grid.Row="8" x:Name="TxtMotivo" Height="60" Padding="10,8,10,8" FontSize="12" 
                BorderBrush="#D1D5DB" BorderThickness="1" Margin="0,0,0,15" 
                TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                TextChanged="TxtMotivo_TextChanged"/>

        <!-- Estado de validación -->
        <TextBlock Grid.Row="9" x:Name="TxtEstadoValidacion" 
                  Text="⚠️ Complete todos los campos para continuar" 
                  FontSize="11" Foreground="#EF4444" Margin="0,0,0,15" 
                  TextAlignment="Center"/>

        <!-- Botones -->
        <Grid Grid.Row="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" x:Name="BtnCancelar" Content="❌ Cancelar" Height="40" 
                   FontSize="13" FontWeight="Bold" Background="#9CA3AF" Foreground="White" 
                   BorderThickness="0" Margin="0,0,5,0" Click="BtnCancelar_Click"/>

            <Button Grid.Column="1" x:Name="BtnAplicar" Content="🎁 Aplicar Descuento" Height="40" 
                   FontSize="13" FontWeight="Bold" Background="#059669" Foreground="White" 
                   BorderThickness="0" Margin="5,0,0,0" Click="BtnAplicar_Click" IsEnabled="False"/>
        </Grid>
    </Grid>
</Window>